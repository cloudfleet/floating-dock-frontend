"use strict";angular.module("marinaFrontendApp",["ngResource","ngSanitize","ui.router","ui.bootstrap"]),angular.module("marinaFrontendApp").config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(a,b,c,d){var e=angular.module("marinaFrontendApp");e.controller=a.register,e.directive=b.directive,e.filter=c.register,e.factory=d.factory,e.service=d.service,e.constant=d.constant,e.value=d.value}]),angular.module("marinaFrontendApp").run(["$rootScope","$state","$stateParams",function(a,b,c){a.$state=b,a.$stateParams=c}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode(!0),b.otherwise("/app/dashboard"),a.state("app",{"abstract":!0,url:"/app",templateUrl:"views/app.html",data:{requireLogin:!0}}).state("app.dashboard",{url:"/dashboard",templateUrl:"views/app_dashboard.html"}).state("app.repository",{url:"/repos/:owner/:name",templateUrl:"views/app_repository.html"}).state("app.repository_build_logs",{url:"/repos/:owner/:name/builds/:build_id/logs",templateUrl:"views/app_repository_build_logs.html"})}]),angular.module("marinaFrontendApp").controller("AppCtrl",["$scope","$window",function(a,b){function c(a){var b=a.navigator.userAgent||a.navigator.vendor||a.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(b)}var d=!!navigator.userAgent.match(/MSIE/i);d&&angular.element(b.document.body).addClass("ie"),c(b)&&angular.element(b.document.body).addClass("smart"),a.getCurrentUser=function(){return cockpitApi.getCurrentUser()},a.app={name:"cloud fleet",version:"1.0.1",color:{primary:"#e26826",info:"#088076",success:"#27c24c",warning:"#fad733",danger:"#f05050",light:"#e8eff0",dark:"#3a3f51",black:"#1c2b36"},settings:{themeID:1,navbarHeaderColor:"bg-cf-orange",asideColor:"bg-black",headerFixed:!0,asideFixed:!0,asideFolded:!0}}}]),angular.module("marinaFrontendApp").factory("marinaApi",["$resource","$http","$q","$rootScope","$state",function(a,b,c,d,e){var f={getRepositories:function(){var a=c.defer();return b.get("/api/v1/repos/").success(function(b){a.resolve(b.repositories)}).error(function(){a.resolve(null)}),a.promise},getRepository:function(a){var d=c.defer();return b.get("/api/v1/repos/"+a).success(function(a){d.resolve(a)}).error(function(){d.resolve(null)}),d.promise},getBuildLogs:function(a,d){var e=c.defer();return b.get("/api/v1/repos/"+a+"/builds/"+d+"/logs").success(function(a){e.resolve(a)}).error(function(){e.resolve(null)}),e.promise}};return f}]),angular.module("marinaFrontendApp").filter("fromNow",function(){return function(a){return moment(a).fromNow()}}).filter("statusBadgeClass",function(){return function(a){return a?a.success?"success":"danger":"warning"}}),angular.module("marinaFrontendApp").controller("DashboardCtrl",["$scope","marinaApi",function(a,b){console.log("Creating dashboard scope"),b.getRepositories().then(function(b){a.repositories=b}),a.lastBuild=function(a){return a.builds?a.builds.sort(function(a,b){return a.end_time==b.end_time?0:a.end_time?b.end_time&&a.end_time<b.end_time?1:-1:1})[0]:null},a.lastSuccessfulBuild=function(a){return a.builds?a.builds.filter(function(a){return a.success}).sort(function(a,b){return a.end_time==b.end_time?0:a.end_time<b.end_time?1:-1})[0]:null}}]),angular.module("marinaFrontendApp").controller("RepositoryCtrl",["$scope","$stateParams","marinaApi",function(a,b,c){var d=b.owner+"/"+b.name;console.log("Creating scope"),c.getRepository(d).then(function(b){a.repository=b}),a.lastBuild=function(){return a.repository.builds?a.repository.builds.sort(function(a,b){return a.end_time==b.end_time?0:a.end_time<b.end_time?1:-1})[0]:null},a.lastSuccessfulBuild=function(b){return a.repository.builds?a.repository.builds.filter(function(a){return a.success}).sort(function(a,b){return a.end_time==b.end_time?0:a.end_time<b.end_time?1:-1})[0]:null}}]),angular.module("marinaFrontendApp").controller("RepositoryBuildLogsCtrl",["$scope","$stateParams","marinaApi",function(a,b,c){a.repository_full_name=b.owner+"/"+b.name,a.build_id=b.build_id,c.getBuildLogs(a.repository_full_name,a.build_id).then(function(b){a.logs=b})}]);
//# sourceMappingURL=scripts.96642254.js.map